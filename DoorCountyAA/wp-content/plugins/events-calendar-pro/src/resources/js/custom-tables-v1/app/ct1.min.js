var tribe="object"==typeof tribe?tribe:{};tribe["custom-tables-v1"]=tribe["custom-tables-v1"]||{},tribe["custom-tables-v1"].ct1=function(e){function t(t){for(var n,i,l=t[0],s=t[1],a=t[2],d=0,p=[];d<l.length;d++)i=l[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(u&&u(t);p.length;)p.shift()();return c.push.apply(c,a||[]),r()}function r(){for(var e,t=0;t<c.length;t++){for(var r=c[t],n=!0,l=1;l<r.length;l++){var s=r[l];0!==o[s]&&(n=!1)}n&&(c.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},o={0:0},c=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var l=window.webpackJsonp=window.webpackJsonp||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var a=0;a<l.length;a++)t(l[a]);var u=s;return c.push(["NFBX",1]),r()}({"13aI":function(e,t){e.exports=tribe["events-pro"].data.blocks.recurring.actions},"644Q":function(e,t,r){},"6OzC":function(e,t){e.exports=lodash.find},"6Ugf":function(e,t){e.exports=tribe.common.elements},"8N8N":function(e,t){e.exports=tribe["events-pro"].elements},"9lL/":function(e,t){e.exports=tribe.common.data.plugins},B8vQ:function(e,t){e.exports=tribe.common.utils},GE2E:function(e,t){e.exports=tribe.common.icons},HJt2:function(e,t){e.exports=tribe.events.data.blocks.datetime},Ixdi:function(e,t,r){},JXX8:function(e,t){e.exports=tribe["events-pro"].data.blocks.recurring},K2gz:function(e,t){e.exports=tribe.modules.classnames},MWqi:function(e,t){e.exports=tribe.modules.reselect},"MXy+":function(e,t){e.exports=tribe.events.data.blocks.datetime.reducer},NFBX:function(e,t,r){"use strict";r.r(t),r.d(t,"blocks",(function(){return _})),r.d(t,"data",(function(){return O})),r.d(t,"dialog",(function(){return g})),r.d(t,"elements",(function(){return v})),r.d(t,"plugins",(function(){return T})),r.d(t,"occurrenceRedirect",(function(){return m})),r.d(t,"seriesMetabox",(function(){return k}));var n={};r.r(n),r.d(n,"TEC_EVENTS_PRO_PLUGIN",(function(){return w}));var o={};r.r(o),r.d(o,"ADD_EXCEPTION_RULE",(function(){return F})),r.d(o,"REMOVE_EXCEPTION_RULE",(function(){return U})),r.d(o,"EDIT_EXCEPTION_RULE",(function(){return H}));var c={};r.r(c),r.d(c,"addExceptionRule",(function(){return B})),r.d(c,"removeExceptionRule",(function(){return G})),r.d(c,"editExceptionRule",(function(){return V}));var i={};r.r(i),r.d(i,"DAY_LABEL",(function(){return J})),r.d(i,"WEEK_LABEL",(function(){return z})),r.d(i,"MONTH_LABEL",(function(){return Q})),r.d(i,"YEAR_LABEL",(function(){return Z})),r.d(i,"DAY_LABEL_PLURAL",(function(){return ee})),r.d(i,"WEEK_LABEL_PLURAL",(function(){return te})),r.d(i,"MONTH_LABEL_PLURAL",(function(){return re})),r.d(i,"YEAR_LABEL_PLURAL",(function(){return ne})),r.d(i,"SINGLE_LABEL",(function(){return oe})),r.d(i,"DAILY_LABEL",(function(){return ce})),r.d(i,"WEEKLY_LABEL",(function(){return ie})),r.d(i,"MONTHLY_LABEL",(function(){return le})),r.d(i,"YEARLY_LABEL",(function(){return se})),r.d(i,"WEEKLY_CUSTOM_LABEL",(function(){return ae})),r.d(i,"MONTHLY_CUSTOM_LABEL",(function(){return ue})),r.d(i,"YEARLY_CUSTOM_LABEL",(function(){return de})),r.d(i,"WEEKLY_CUSTOM_TYPE_ID",(function(){return pe})),r.d(i,"MONTHLY_CUSTOM_TYPE_ID",(function(){return be})),r.d(i,"YEARLY_CUSTOM_TYPE_ID",(function(){return ye})),r.d(i,"KEY_IS_OFF_START",(function(){return fe}));var l={};r.r(l),r.d(l,"WEEKLY_CUSTOM_EXCEPTION_RULE_TYPES_OPTION",(function(){return Ee})),r.d(l,"MONTHLY_CUSTOM_EXCEPTION_RULE_TYPES_OPTION",(function(){return Oe})),r.d(l,"YEARLY_CUSTOM_EXCEPTION_RULE_TYPES_OPTION",(function(){return _e})),r.d(l,"EXCEPTION_RULE_TYPES_OPTIONS",(function(){return ge})),r.d(l,"CUSTOM_EXCEPTION_RULE_TYPES_OPTIONS",(function(){return ve}));var s={};r.r(s),r.d(s,"getIndex",(function(){return me})),r.d(s,"getAllExceptionRules",(function(){return Te})),r.d(s,"getExceptionRule",(function(){return ke})),r.d(s,"getExceptionRuleTypes",(function(){return Se})),r.d(s,"getIsOffStart",(function(){return he})),r.d(s,"getOffStartIndex",(function(){return Re})),r.d(s,"getTypeId",(function(){return Pe})),r.d(s,"getTypeOption",(function(){return je})),r.d(s,"isRuleTypeCustom",(function(){return we}));var a={};r.r(a),r.d(a,"types",(function(){return o})),r.d(a,"actions",(function(){return c})),r.d(a,"selectors",(function(){return s})),r.d(a,"options",(function(){return l})),r.d(a,"sagas",(function(){return Ie})),r.d(a,"default",(function(){return Fe})),r.d(a,"setInitialState",(function(){return Ae}));var u={};r.r(u),r.d(u,"ADD_RECURRENCE_RULE",(function(){return Ue})),r.d(u,"REMOVE_RECURRENCE_RULE",(function(){return He})),r.d(u,"EDIT_RECURRENCE_RULE",(function(){return Be}));var d={};r.r(d),r.d(d,"addRecurrenceRule",(function(){return Ge})),r.d(d,"removeRecurrenceRule",(function(){return Ve})),r.d(d,"editRecurrenceRule",(function(){return We}));var p={};r.r(p),r.d(p,"WEEKLY_CUSTOM_RECURRENCE_RULE_TYPES_OPTION",(function(){return $e})),r.d(p,"MONTHLY_CUSTOM_RECURRENCE_RULE_TYPES_OPTION",(function(){return Xe})),r.d(p,"YEARLY_CUSTOM_RECURRENCE_RULE_TYPES_OPTION",(function(){return qe})),r.d(p,"RECURRENCE_RULE_TYPES_OPTIONS",(function(){return Je})),r.d(p,"CUSTOM_RECURRENCE_RULE_TYPES_OPTIONS",(function(){return ze}));var b={};r.r(b),r.d(b,"getIndex",(function(){return Qe})),r.d(b,"getAllRecurrenceRules",(function(){return Ze})),r.d(b,"getRecurrenceRule",(function(){return et})),r.d(b,"getRecurrenceRuleTypes",(function(){return tt})),r.d(b,"getIsOffStart",(function(){return rt})),r.d(b,"getOffStartIndex",(function(){return nt})),r.d(b,"getTypeId",(function(){return ot})),r.d(b,"getTypeOption",(function(){return ct})),r.d(b,"isRuleTypeCustom",(function(){return it}));var y={};r.r(y),r.d(y,"types",(function(){return u})),r.d(y,"actions",(function(){return d})),r.d(y,"selectors",(function(){return b})),r.d(y,"options",(function(){return p})),r.d(y,"sagas",(function(){return ft})),r.d(y,"default",(function(){return gt})),r.d(y,"setInitialState",(function(){return Ot}));var f={};r.r(f),r.d(f,"getTickets",(function(){return vt})),r.d(f,"isEventTicketsActive",(function(){return mt})),r.d(f,"hasRSVP",(function(){return Tt})),r.d(f,"hasTickets",(function(){return kt}));var E={};r.r(E),r.d(E,"getShared",(function(){return Pt})),r.d(E,"getDayOfMonthOptions",(function(){return jt}));var O={};r.r(O),r.d(O,"initStore",(function(){return on})),r.d(O,"getStore",(function(){return cn}));var _={};r.r(_);var g={};r.r(g);var v={};r.r(v),r.d(v,"DayOfMonthPicker",(function(){return No})),r.d(v,"EveryFrequency",(function(){return Po})),r.d(v,"OnDayOfMonthPicker",(function(){return Io}));var m={};r.r(m);var T={};r.r(T);var k={};r.r(k);var S=r("B8vQ"),h=r("9lL/"),R=r("g8L8");const P=e=>({type:"@@MT/EVENTS_PRO/SET_PREVIOUS_START_DATE_TIME",payload:{start:e}});var j=r("MWqi");const w="tec-events-pro",L=Object(j.createSelector)([e=>e[n.TEC_EVENTS_PRO_PLUGIN].blocks.datetime],e=>e.previousStart);var D=r("lSNA"),x=r.n(D),N=r("zCYh"),C=r("MXy+");function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){x()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const A={previousStart:Object(N.toDateTime)(C.defaultStartMoment)},Y={previousStart:"_EventStartDate"};const F="@@MT/EVENTS_PRO/ADD_EXCEPTION_RULE",U="@@MT/EVENTS_PRO/REMOVE_EXCEPTION_RULE",H="@@MT/EVENTS_PRO/EDIT_EXCEPTION_RULE",B=e=>({type:F,payload:e}),G=e=>({type:U,index:e}),V=(e,t)=>({type:H,index:e,payload:t});var W=r("6OzC"),K=r.n(W),$=r("UnPw"),X=r("gGza");const{__:q}=wp.i18n,J=q("day","tribe-events-calendar-pro"),z=q("week","tribe-events-calendar-pro"),Q=q("month","tribe-events-calendar-pro"),Z=q("year","tribe-events-calendar-pro"),ee=q("days","tribe-events-calendar-pro"),te=q("weeks","tribe-events-calendar-pro"),re=q("months","tribe-events-calendar-pro"),ne=q("years","tribe-events-calendar-pro"),oe=q("once","tribe-events-calendar-pro"),ce=q("daily","tribe-events-calendar-pro"),ie=q("weekly","tribe-events-calendar-pro"),le=q("monthly","tribe-events-calendar-pro"),se=q("yearly","tribe-events-calendar-pro"),ae=q("weekly (custom)","tribe-events-calendar-pro"),ue=q("monthly (custom)","tribe-events-calendar-pro"),de=q("yearly (custom)","tribe-events-calendar-pro"),pe=X.WEEKLY+"-custom",be=X.MONTHLY+"-custom",ye=X.YEARLY+"-custom",fe="isOffStart",Ee={label:ae,value:X.WEEKLY,id:pe},Oe={label:ue,value:X.MONTHLY,id:be},_e={label:de,value:X.YEARLY,id:ye},ge=[{label:oe,value:X.SINGLE,id:X.SINGLE},{label:ce,value:X.DAILY,id:X.DAILY},{label:ie,value:X.WEEKLY,id:X.WEEKLY},{label:le,value:X.MONTHLY,id:X.MONTHLY},{label:se,value:X.YEARLY,id:X.YEARLY}],ve=[Ee,Oe,_e],me=(e,t)=>t.index,Te=e=>e[n.TEC_EVENTS_PRO_PLUGIN].blocks.exception,ke=Object(j.createSelector)([Te,me],(e,t)=>e[t]),Se=Object(j.createSelector)([ke],e=>e.ruleTypes||ge),he=Object(j.createSelector)([ke],e=>e.isOffStart),Re=Object(j.createSelector)([ke],e=>e.offStartIndex),Pe=Object(j.createSelector)([ke],e=>e.typeId),je=Object(j.createSelector)([$.getType,Pe],(e,t)=>{const r=[...ge];return K()(r,r=>{const n=r.value===e;return t?n&&r.id===t:n})}),we=Object(j.createSelector)([Pe],e=>!!e&&e.includes("custom"));var Le=r("RmXt"),De=r("OuoG");function*xe(){const e=(yield Object(Le.select)($.getExceptions)).filter(e=>e.type!==X.SINGLE),t={isOffStart:!1,offStartIndex:-1,typeId:X.SINGLE};if(e.length){const e=ge.filter(e=>e.value===X.SINGLE);t.ruleTypes=e}else t.ruleTypes=ge;yield Object(Le.put)(B(t))}function*Ne(e){yield Object(Le.put)(G(e.index));const t=yield Object(Le.select)($.getExceptions);t.filter(e=>e.type!==X.SINGLE).length||(yield Object(Le.all)(t.map((e,t)=>Object(Le.put)(V(t,{ruleTypes:ge})))))}function*Ce(){const e=yield Object(Le.select)($.getExceptions);if(e.filter(e=>e.type!==X.SINGLE).length){const t=ge.filter(e=>e.value===X.SINGLE);yield Object(Le.all)(e.map((e,r)=>{if(e.type===X.SINGLE)return Object(Le.put)(V(r,{ruleTypes:t}))}))}else yield Object(Le.all)(e.map((e,t)=>Object(Le.put)(V(t,{ruleTypes:ge}))))}function*Ie(){yield Object(Le.takeEvery)([De.ADD_EXCEPTION_FIELD],xe),yield Object(Le.takeEvery)([De.REMOVE_EXCEPTION],Ne),yield Object(Le.takeEvery)([De.EDIT_EXCEPTION],Ce)}const Me=[],Ae=e=>{if(e.meta._tribe_blocks_recurrence_exclusions)try{const t=JSON.parse(e.meta._tribe_blocks_recurrence_exclusions),r=t.filter(e=>e.type!==X.SINGLE),n=ge.filter(e=>e.value===X.SINGLE);t.forEach((e,t)=>{const o={isOffStart:!1,offStartIndex:-1,typeId:e.type};r.length&&e.type===X.SINGLE?o.ruleTypes=n:o.ruleTypes=ge,Me.push(o)})}catch(e){console.error(e)}},Ye=(e,t)=>{const r=Object.assign({},e[t.index],t.payload);return 1===e.length?[r]:[...e.slice(0,t.index),r,...e.slice(t.index+1)]};var Fe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return[...e,t.payload];case U:return e.filter((e,r)=>r!==t.index);case H:return Ye(e,t);default:return e}};const Ue="@@MT/EVENTS_PRO/ADD_RECURRENCE_RULE",He="@@MT/EVENTS_PRO/REMOVE_RECURRENCE_RULE",Be="@@MT/EVENTS_PRO/EDIT_RECURRENCE_RULE",Ge=e=>({type:Ue,payload:e}),Ve=e=>({type:He,index:e}),We=(e,t)=>({type:Be,index:e,payload:t});var Ke=r("iy/v");const $e={label:ae,value:X.WEEKLY,id:pe},Xe={label:ue,value:X.MONTHLY,id:be},qe={label:de,value:X.YEARLY,id:ye},Je=[{label:oe,value:X.SINGLE,id:X.SINGLE},{label:ce,value:X.DAILY,id:X.DAILY},{label:ie,value:X.WEEKLY,id:X.WEEKLY},{label:le,value:X.MONTHLY,id:X.MONTHLY},{label:se,value:X.YEARLY,id:X.YEARLY}],ze=[$e,Xe,qe],Qe=(e,t)=>t.index,Ze=e=>e[n.TEC_EVENTS_PRO_PLUGIN].blocks.recurring,et=Object(j.createSelector)([Ze,Qe],(e,t)=>e[t]),tt=Object(j.createSelector)([et],e=>e.ruleTypes||Je),rt=Object(j.createSelector)([et],e=>e.isOffStart),nt=Object(j.createSelector)([et],e=>e.offStartIndex),ot=Object(j.createSelector)([et],e=>e.typeId),ct=Object(j.createSelector)([Ke.getType,ot],(e,t)=>{let r=[...Je];return t&&(r=[...r,...ze]),K()(r,r=>{const n=r.value===e;return t?n&&r.id===t:n})}),it=Object(j.createSelector)([ot],e=>!!e&&e.includes("custom"));var lt=r("tbMi"),st=r("gSph"),at=r("pVH8"),ut=r("13aI");function*dt(){const e=(yield Object(Le.select)(Ke.getRules)).filter(e=>e.type!==X.SINGLE),t={isOffStart:!1,offStartIndex:-1,typeId:X.SINGLE};if(e.length){const e=Je.filter(e=>e.value===X.SINGLE);t.ruleTypes=e}else t.ruleTypes=Je;yield Object(Le.put)(Ge(t))}function*pt(e){yield Object(Le.put)(Ve(e.index));const t=yield Object(Le.select)(Ke.getRules);t.filter(e=>e.type!==X.SINGLE).length||(yield Object(Le.all)(t.map((e,t)=>Object(Le.put)(We(t,{ruleTypes:Je})))))}function*bt(e){if(e.sync)return;const t=yield Object(Le.select)(Ke.getRules);if(t.filter(e=>e.type!==X.SINGLE).length){const e=Je.filter(e=>e.value===X.SINGLE);yield Object(Le.all)(t.map((t,r)=>{if(t.type===X.SINGLE)return Object(Le.put)(We(r,{ruleTypes:e}))}))}else yield Object(Le.all)(t.map((e,t)=>Object(Le.put)(We(t,{ruleTypes:Je}))))}function*yt(){const e=(yield Object(Le.select)(Ke.getRulesCount))-1,t=yield Object(Le.call)(N.toMoment,lt.TODAY),r=yield Object(Le.call)([t,"add"],1,"year"),n=yield Object(Le.call)(N.toDate,r),o=new Date(n);yield Object(Le.put)(ut.syncRule(e,{[st.KEY_LIMIT_DATE_INPUT]:n,[st.KEY_LIMIT_DATE_OBJ]:o}))}function*ft(){yield Object(Le.takeEvery)([at.ADD_RULE_FIELD],dt),yield Object(Le.takeEvery)([at.REMOVE_RULE],pt),yield Object(Le.takeEvery)([at.EDIT_RULE],bt),yield Object(Le.takeEvery)([at.ADD_RULE],yt)}const Et=[],Ot=e=>{if(e.meta._tribe_blocks_recurrence_rules)try{const t=JSON.parse(e.meta._tribe_blocks_recurrence_rules),r=t.filter(e=>e.type!==X.SINGLE),n=Je.filter(e=>e.value===X.SINGLE);t.forEach((e,t)=>{const o={isOffStart:!!e[fe],offStartIndex:-1,typeId:e.type};if(e[fe]){const r=[...Je,p[e.type.toUpperCase()+"_CUSTOM_RECURRENCE_RULE_TYPES_OPTION"]];o.offStartIndex=t,o.typeId=i[e.type.toUpperCase()+"_CUSTOM_TYPE_ID"],o.ruleTypes=r}else r.length&&e.type===X.SINGLE?o.ruleTypes=n:o.ruleTypes=Je;Et.push(o)})}catch(e){console.error(e)}},_t=(e,t)=>{const r=Object.assign({},e[t.index],t.payload);return 1===e.length?[r]:[...e.slice(0,t.index),r,...e.slice(t.index+1)]};var gt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ue:return[...e,t.payload];case He:return e.filter((e,r)=>r!==t.index);case Be:return _t(e,t);default:return e}};const vt=e=>e.tickets,mt=Object(j.createSelector)([vt],e=>!!e),Tt=Object(j.createSelector)([vt],e=>!!e&&!!e.blocks.rsvp.id),kt=Object(j.createSelector)([vt],e=>!!e&&!!e.blocks.ticket.tickets.allClientIds.length);var St=r("rKB8");const ht=e=>{(e=>{const{meta:t}=e;Object.keys(Y).forEach(e=>{const r=Y[e];t.hasOwnProperty(r)&&(A[e]=t[r])})})(e),Ot(e),Ae(e)};var Rt=Object(St.combineReducers)({datetime:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@@MT/EVENTS_PRO/SET_PREVIOUS_START_DATE_TIME":return M(M({},e),{},{previousStart:t.payload.start});default:return e}},exception:Fe,recurring:gt});const Pt=e=>e[n.TEC_EVENTS_PRO_PLUGIN].shared,jt=Object(j.createSelector)([Pt],e=>e.dayOfMonthOptions);var wt=r("kczL"),Lt=r("Yht6"),Dt=r("SOG1"),xt=r("tPgE"),Nt=r("OluY");const Ct={1:X.FIRST,2:X.SECOND,3:X.THIRD,4:X.FOURTH,5:X.FIFTH},It={1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday",7:"Sunday"},Mt=e=>{const t=e.isoWeekday();return It[t]},At=e=>{const t=e.date(),r=Math.floor((t-1)/7)+1;return Ct[r]},Yt=e=>e.daysInMonth()-e.date()<7,Ft=e=>e.daysInMonth()===e.date(),Ut=e=>{const t=[],r=Object(wt.get)("tribe_events_pro_recurrence_strings"),n=At(e),o=Mt(e),c=n+o,i=r.customTablesV1.dayOfMonth.pattern[c];if(t.push({label:i.label,value:i.ordinal.toLowerCase()+"-"+i.day}),Yt(e)){const e="last"+o,n=r.customTablesV1.dayOfMonth.pattern[e];t.push({label:n.label,value:n.ordinal.toLowerCase()+"-"+n.day})}if(Ft(e)){const e="lastDay",n=r.customTablesV1.dayOfMonth.pattern[e];t.push({label:n.label,value:n.ordinal.toLowerCase()+"-"+n.day})}const l=e.date(),s=r.customTablesV1.dayOfMonth.date[l];return t.push({label:s,value:String(l)}),t},Ht=e=>{const t=e.split("-");if(1===t.length)return{[st.KEY_WEEK]:null,[st.KEY_DAY]:Number(t[0])};if(2===t.length){const e=t[0],r=Number(t[1]);return{[st.KEY_WEEK]:e,[st.KEY_DAY]:r}}return{}},{SINGLE:Bt,DAILY:Gt,WEEKLY:Vt,MONTHLY:Wt,YEARLY:Kt,LAST:$t}=X;function Xt(e,t,r){let{selectors:n}=e;return function*(){const e=yield Object(Le.select)(n.getWeek,{index:t}),o=yield Object(Le.select)(n.getDay,{index:t});if(!e&&o){return o===(yield Object(Le.call)([r,"date"]))}if(e){const t=yield Object(Le.call)([r,"isoWeekday"]),n=yield Object(Le.call)(At,r),c=yield Object(Le.call)(Yt,r),i=yield Object(Le.call)(Ft,r),l=o===t||8===o&&i;return(e===n||(c||i)&&e===$t)&&l}return!1}()}function qt(e,t,r){let{selectors:n}=e;return function*(){const e=((e,t)=>{const r=parseInt(t);return e?8===r?"last-day-in-month":"last"===e?"last-day-of-week-in-month":"day-of-week-in-month":t?"day-n":null})(yield Object(Le.select)(n.getWeek,{index:t}),yield Object(Le.select)(n.getDay,{index:t})),o=r.map(e=>{return(t=e.value)?"last-8"===t?"last-day-in-month":t.match(/(first|second|third|fourth|fifth)-\d/)?"day-of-week-in-month":t.match(/last-\d/)?"last-day-of-week-in-month":"day-n":null;var t}).indexOf(e);return o>=0?o:0}()}function*Jt(e,t,r){const n=yield Object(Le.call)(Ut,r.startMoment),o=yield Object(Le.call)(qt,e,t,n),c=yield Object(Le.call)(Ht,n[o].value);yield Object(Le.put)(e.actions.sync(t,c))}function*zt(e,t,r){if(tecEventDetails.isRdate)return;const{startMoment:n,prevStartMoment:o}=r,c=yield Object(Le.call)([n,"isSame"],o,"day"),i=yield Object(Le.call)(Xt,e,t,n);c&&i||(yield Object(Le.call)(Jt,e,t,r))}function Qt(e,t,r){let{actions:n,selectors:o}=e,{startMoment:c,prevStartMoment:i}=r;return function*(){const e=yield Object(Le.call)([c,"isoWeekday"]),r=yield Object(Le.call)([i,"isoWeekday"]),l=yield Object(Le.select)(o.getDays,{index:t});if(tecEventDetails.isRdate)return;if(e===r&&l.includes(e))return;const s=l.filter(e=>e!==r);s.includes(e)||(s.push(e),s.sort((e,t)=>e-t)),yield Object(Le.put)(n.sync(t,{[st.KEY_DAYS]:s}))}()}function Zt(e,t,r){let{actions:n,selectors:o}=e,{startMoment:c,prevStartMoment:i}=r;return function*(){const e=(yield Object(Le.call)([c,"month"]))+1,r=(yield Object(Le.call)([i,"month"]))+1,l=yield Object(Le.select)(o.getMonth,{index:t});if(tecEventDetails.isRdate)return;if(e===r&&l.includes(e))return;const s=l.filter(e=>e!==r);s.includes(e)||(s.push(e),s.sort((e,t)=>e-t)),yield Object(Le.put)(n.sync(t,{[st.KEY_MONTH]:s}))}()}function*er(e){const t=b,r=Ke,n={sync:ut.syncRule},o=Ke.getRulesCount,c=yield Object(Le.select)(Dt.getStart),i=yield Object(Le.call)(N.toMoment,c),l=yield Object(Le.select)(L),s=yield Object(Le.call)(N.toMoment,l),a=yield Object(Le.select)(o),u={startMoment:i,prevStartMoment:s};let d,p,y,f=0;const E=yield Object(Le.call)(Ut,i);for(yield Object(Le.put)((e=>{let{options:t}=e;return{type:"@@MT/EVENTS_PRO/SET_DAY_OF_MONTH_OPTIONS",payload:{options:t}}})({options:E}));f<a;)if(d=yield Object(Le.select)(r.getType,{index:f}),p=yield Object(Le.select)(t.isRuleTypeCustom,{index:f}),y=yield Object(Le.call)([[Bt,Gt],"includes"],d),y||p)f++;else{switch(d){case Vt:yield Object(Le.call)(Qt,{actions:n,selectors:r},f,u);break;case Wt:yield Object(Le.call)(zt,{actions:n,selectors:r},f,u);break;case Kt:yield Object(Le.call)(Zt,{actions:n,selectors:r},f,u),yield Object(Le.call)(zt,{actions:n,selectors:r},f,u)}f++}}function*tr(e){const t=e===st.RECURRING,r=t?b:s,n=t?Ke:$,o=yield Object(Le.select)(t?Ke.getRulesCount:$.getExceptionsCount);let c,i,l,a,u,d=0;for(;d<o;){if(c=yield Object(Le.select)(n.getType,{index:d}),i=yield Object(Le.select)(r.isRuleTypeCustom,{index:d}),l=yield Object(Le.call)([[Vt,Wt,Kt],"includes"],c),l&&!i){a=yield Object(Le.call)([document,"querySelector"],".tribe-editor__events-pro__panel-header--"+e),a&&!a.classList.contains("tribe-editor__events-pro__panel-header--expanded")&&(u=yield Object(Le.call)([a,"querySelector"],"button"),u.click());break}d++}}function*rr(){yield Object(Le.call)(er,{type:at.EDIT_RULE}),yield Object(Le.call)(tr,st.RECURRING),yield Object(Le.call)(tr,st.EXCEPTION);const e=yield Object(Le.select)(Dt.getStart);yield Object(Le.put)(P(e))}function*nr(e){if(e.sync)return;yield Object(Le.call)(er,e);const t=yield Object(Le.select)(Dt.getStart);yield Object(Le.put)(P(t))}function*or(e){if(e.sync)return;if(!e.payload.hasOwnProperty("typeId")||!e.payload.typeId.includes("custom"))return;const t=e.type===Be,r=t?b:s,n=yield Object(Le.select)(r.getOffStartIndex,{index:e.index});if(-1===n)return;const o=t?Object(wt.postObjects)().tribe_events.meta._tribe_blocks_recurrence_rules[n]:Object(wt.postObjects)().tribe_events.meta._tribe_blocks_recurrence_exclusions[n],c=Object.keys(o).reduce((e,t)=>(fe===t||(e[t]=o[t]),e),{}),i=t?ut.syncRule:xt.syncException;yield Object(Le.put)(i(e.index,c))}const cr=e=>function*(t,r){if(yield Object(Le.select)(e.selectors.isRuleTypeCustom,{index:r}))return;const n=yield Object(Le.select)(e.proSelectors.getType,{index:r}),o={isOffStart:!1,offStartIndex:-1};(yield Object(Le.select)(e.proSelectors.getRules)).filter(e=>e.type!==Bt).length&&n===Bt||(o.ruleTypes=e.options.ruleTypeOptions),yield Object(Le.put)(e.actions.edit(r,o))};function*ir(){const e=yield Object(Le.select)(Ze),t=yield Object(Le.select)(Te);yield Object(Le.all)(e.map((e,t)=>Object(Le.call)(cr({actions:{edit:We},selectors:b,proSelectors:Ke,options:{ruleTypeOptions:Je}}),e,t))),yield Object(Le.all)(t.map((e,t)=>Object(Le.call)(cr({actions:{edit:V},selectors:s,proSelectors:$,options:{ruleTypeOptions:ge}}),e,t)))}function*lr(){yield Object(Le.takeEvery)([Lt.SET_START_DATE_TIME],rr),yield Object(Le.takeEvery)([at.EDIT_RULE],nr),yield Object(Le.takeEvery)([Be],or),yield Object(Le.takeEvery)([H],or);const e=yield Object(Le.call)(Nt.createWPEditorChannel);for(;;)yield Object(Le.take)(e),yield Object(Le.call)(ir)}var sr=r("wy2R");function ar(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ur(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ar(Object(r),!0).forEach((function(t){x()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ar(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const dr={dayOfMonthOptions:Object(sr.isMoment)(C.defaultStartMoment)?Ut(C.defaultStartMoment):[]};const pr="@@MT/EVENTS_PRO/UPDATE_EVENT_DETAILS_EVENT",br="@@MT/EVENTS_PRO/UPDATE_EVENT_DETAILS_OCCURRENCE",yr="@@MT/EVENTS_PRO/UPDATE_EVENT_DETAILS_SERIES";function fr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Er(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fr(Object(r),!0).forEach((function(t){x()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Or=tecEventDetails&&tecEventDetails.event?tecEventDetails.event:{};var _r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Or,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pr:return Er(Er({},e),t.payload);default:return e}};function gr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gr(Object(r),!0).forEach((function(t){x()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const mr=tecEventDetails&&tecEventDetails.occurrence?tecEventDetails.occurrence:{};var Tr=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case br:return vr(vr({},e),t.payload);default:return e}};function kr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Sr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kr(Object(r),!0).forEach((function(t){x()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const hr=tecEventDetails&&tecEventDetails.series?tecEventDetails.series:{};var Rr=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case yr:return Sr(Sr({},e),t.payload);default:return e}};function Pr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function jr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pr(Object(r),!0).forEach((function(t){x()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const wr=tecEventDetails||{};const Lr=e=>e[n.TEC_EVENTS_PRO_PLUGIN].eventDetails;Object(j.createSelector)([Lr],e=>e.event),Object(j.createSelector)([Lr],e=>e.occurrence),Object(j.createSelector)([Lr],e=>e.series);var Dr=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@@MT/EVENTS_PRO/UPDATE_EVENT_DETAILS":return jr(jr({},e),t.payload);case pr:return jr(jr({},e),{},{event:_r(e.event,t)});case br:return jr(jr({},e),{},{occurrence:Tr(e.occurrence,t)});case yr:return jr(jr({},e),{},{series:Rr(e.series,t)});default:return e}},xr=Object(St.combineReducers)({blocks:Rt,shared:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@@MT/EVENTS_PRO/SET_DAY_OF_MONTH_OPTIONS":return ur(ur({},e),{},{dayOfMonthOptions:t.payload.options});default:return e}},eventDetails:Dr});const{dispatch:Nr,select:Cr,subscribe:Ir}=wp.data;var Mr=r("yXPU"),Ar=r.n(Mr);const{select:Yr}=wp.data,Fr={isSavingPost:!1,isSavingMetaBoxes:!1},Ur="button.editor-post-publish-button",Hr="#_tec_relationship_event_to_series",Br=".tec-events-pro-series__edit-link-container",Gr=".tec-events-pro-series__edit-link",Vr=()=>Yr("core/edit-post").isSavingMetaBoxes()?(Fr.isSavingMetaBoxes=!0,!1):Fr.isSavingMetaBoxes,{apiFetch:Wr}=wp,{dispatch:Kr,select:$r,subscribe:Xr}=wp.data,qr={saving:!1,running:!1,noticeId:"tec-events-pro-occurrences",subscriptions:[]};function Jr(){return(Jr=Ar()((function*(e){const t=yield Wr({path:`/tec/v1/events/${e}/notices/occurrences/`,method:"GET"});return Array.isArray(t)&&t?t.map(JSON.parse):[]}))).apply(this,arguments)}function zr(){Array.from(qr.subscriptions).map(e=>{e()}),qr.subscriptions=[]}function Qr(e){return function(e){return Jr.apply(this,arguments)}(e).then(t=>{t.length<=0||(Kr("core/notices").createSuccessNotice(t.shift(),{id:qr.noticeId,isDismissible:!0,__unstableHTML:!0,explicitDismiss:!1}),function(e){const t=Xr(()=>{$r("core/notices").getNotices().filter(e=>e.id===qr.noticeId).length<=0&&(t(),e())});qr.subscriptions.push(t)}(function(e){return Ar()((function*(){return yield Wr({path:`/tec/v1/events/${e}/notices/occurrences/`,method:"DELETE"})}))}(e)))})}function Zr(){if(!Vr()||qr.running)return!1;const e=$r("core/editor"),t=e.didPostSaveRequestSucceed();qr.running=!0;const r=e.getCurrentPostId();return r&&t&&(zr(),Qr(r).then(en)),qr.running}function en(){qr.running=!1;const e=Xr(Zr);return qr.subscriptions.push(e),e}function tn(){!function(){const e=Xr(()=>{const t=$r("core/editor");if(!t.__unstableIsEditorReady())return;if(e(),t.isCleanNewPost())return;const r=t.getCurrentPostId();r&&(zr(),Qr(r).then(en))});qr.subscriptions.push(e)}(),en()}var rn=()=>{(()=>{const e=Ir(()=>{Cr("core/notices").getNotices().forEach(t=>{Nt.NOTICE_EDITING_SERIES===t.id&&(Nr("core/notices").removeNotice(t.id),e())})}),t=Ir(()=>{Cr("core/editor").__unstableIsEditorReady()&&t()})})(),tn()};const nn=e=>{ht(e),(e=>{dr.dayOfMonthOptions=Ut(Object(N.toMoment)(e.meta._EventStartDate))})(e)},on=()=>{const e=S.globals.postObjects().tribe_events;e.is_new_post||nn(e);const{dispatch:t,injectReducers:r}=R.store;[a.sagas,y.sagas,lr].forEach(e=>R.store.run(e)),rn(),r({[n.TEC_EVENTS_PRO_PLUGIN]:xr}),t(h.actions.addPlugin(n.TEC_EVENTS_PRO_PLUGIN))},cn=()=>R.store;var ln=r("cDcd");const{__:sn}=wp.i18n,an=e=>{const t=R.store.getState();return f.isEventTicketsActive(t)&&(f.hasRSVP(t)||f.hasTickets(t))?wp.element.createElement("div",{className:"tribe-editor__not-supported-message"},wp.element.createElement("p",{className:"tribe-editor__not-supported-message-text"},sn("Recurrence patterns are not yet supported for events with tickets or RSVPs.","tribe-events-calendar-pro"),wp.element.createElement("br",null),wp.element.createElement("a",{className:"tribe-editor__not-supported-message-link",href:"https://evnt.is/1b7a",target:"_blank",rel:"noopener noreferrer"},sn("Read about our plans for future features.","tribe-events-calendar-pro")))):e};var un=()=>{wp.hooks.addFilter("blocks.recurrence.renderRecurrenceHook","tec/filterRenderRecurrence",an)};const dn=(e,t)=>null;var pn=()=>{wp.hooks.addFilter("blocks.recurrenceDescription.contentHook","tec/filterRecurrenceDescription",dn)};r("O7uX");on(),un(),pn();var bn=r("HJt2");const{toMoment:yn}=S.moment,fn=()=>{tec.editorDialog.el.$instance.empty()},En=e=>{e.forEach((function(e){"text"===e.type?tec.editorDialog.el.$instance.append(function(e){return`<div class="tec-events-pro-dialog__text-row">\n\t\t<p class="tec-events-pro-dialog__text">\n\t\t\t${e.text}\n\t\t</p>\n\t</div>`}(e)):tec.editorDialog.el.$instance.append(function(e){const t=e.checked?"checked":"",r=["tec-events-pro-dialog__input-row","tec-events-pro-dialog__input-row--"+e.type].concat(e.classes).join(" "),n=["tec-events-pro-dialog__radio-input"].concat(e.inputClasses).join(" "),o=["tec-events-pro-dialog__radio-input-label"].concat(e.labelClasses).join(" "),c="tec-events-pro-dialog__radio-input--"+e.type;let i=`<div class="${r}">\n\t\t<input type="radio" name="_tec_update_type" value="${e.type}" class="${n}" id="${c}" ${t} />\n\t\t<label class="${o}" for="${c}">\n\t\t\t${e.label}`;return e.labelHelpText&&(i+='<div><em style="font-style: italic; color: gray; font-size: 90%">'+e.labelHelpText+"</em></div>"),i+="</label></div>",i}(e))}))},On=()=>{const e=[window.tecEventsSeriesBlockEditor.thisEvent],t=cn().getState(),r=bn.selectors.getStart(t),n=yn(r);if(!n.isValid())return e[0];const o=bn.selectors.getAllDay(t),c=bn.selectors.getDateSeparator(t);let i=n.format("MMMM D, YYYY");return i+=o?" "+window.tecEventsSeriesBlockEditor.allDay:` ${c} ${n.format("H:mma")}`,i=`(${i})`,e.push(i),e.join(" ")};var _n=()=>{tec.editorDialog.setupDialog()};function gn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gn(Object(r),!0).forEach((function(t){x()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const{dispatch:mn,select:Tn}=wp.data,kn=()=>{const{editPost:e,savePost:t}=mn("core/editor"),r=tec.editorDialog.el.$instance.find("input:checked").val(),n=Tn("core/editor").getCurrentPost();tec.editorDialog.closeDialog(),e({_tec_update_type:r,_tec_initial_meta:n}),t()},Sn=()=>{const e=[],t=(()=>{const e=cn().getState(),t=Object(Dt.getStart)(e).split(" ")[0],r=Yr("core/editor").getCurrentPost(),{meta:n}=r;return n._EventStartDate.split(" ")[0]!==t})(),r=(()=>{const e=cn().getState(),t=Object(Ke.getRules)(e),r=Yr("core/editor").getCurrentPost(),{meta:n}=r;return(""===n._tribe_blocks_recurrence_rules?"[]":n._tribe_blocks_recurrence_rules)!==JSON.stringify(t)})()||(()=>{const e=cn().getState(),t=Object($.getExceptions)(e),r=Yr("core/editor").getCurrentPost(),{meta:n}=r;return(""===n._tribe_blocks_recurrence_exclusions?"[]":n._tribe_blocks_recurrence_exclusions)!==JSON.stringify(t)})(),n=window.tecEventsSeriesBlockEditor,o={single:!0,upcoming:!0,all:!0};return!t||tecEventDetails&&tecEventDetails.isRdate||(o.all=!1),r&&(o.single=!1),o.all||o.single?(o.single&&e.push({type:"single",label:On(),labelHelpText:n.thisEventHelpText,classes:[],inputClasses:[],labelClasses:[],checked:!1}),e.push({type:"upcoming",label:n.upcomingSetting,classes:[],inputClasses:[],labelClasses:[],checked:!o.all}),o.all&&e.push({type:"all",label:n.allEvents,classes:[],inputClasses:[],labelClasses:[],checked:!0}),e):(e.push({type:"text",text:n.effectThisAndFollowingEventsWarning}),e.push({type:"upcoming",label:n.upcomingSetting,classes:["hidden"],inputClasses:[],labelClasses:[],checked:!0}),e)},hn=()=>{tec.editorDialog.el.$instance.attr("title",window.tecEventsSeriesBlockEditor.editModalTitle),fn(),En(Sn()),tec.editorDialog.setDialogSettings(vn(vn({},tec.editorDialog.defaultDialogSettings),{},{buttons:[{class:"button-primary",text:window.tecEventsSeriesBlockEditor.okButton,click:kn}]})),tec.editorDialog.openDialog()},Rn=()=>{const e=Tn("core/editor").getCurrentPost(),{meta:t}=e;if(t._tec_requires_first_save)return;""!==t._tribe_blocks_recurrence_rules&&"[]"!==t._tribe_blocks_recurrence_rules&&hn()},{dispatch:Pn,select:jn,subscribe:wn}=wp.data,Ln={unsubscribe:null},Dn=()=>{const{meta:e}=jn("core/editor").getCurrentPost();if(!e)return;if(jn("core/editor").isSavingPost())return;Ln.unsubscribe&&Ln.unsubscribe();const{lockPostSaving:t,lockPostAutosaving:r,unlockPostSaving:n,unlockPostAutosaving:o}=Pn("core/editor");(()=>{const{getCurrentPost:e,isEditedPostDirty:t,isEditedPostNew:r}=jn("core/editor"),{meta:n}=e();if(n&&n._tec_requires_first_save)return!1;const o=""!==n._tribe_blocks_recurrence_rules&&"[]"!==n._tribe_blocks_recurrence_rules;return!r()&&(t()&&o)})()?(r(),t(),(()=>{const e=document.querySelector("button.editor-post-publish-button");e&&(e.setAttribute("aria-disabled","false"),e.removeEventListener("click",Rn),e.addEventListener("click",Rn))})()):(n(),o(),(()=>{const e=document.querySelector("button.editor-post-publish-button");e&&e.removeEventListener("click",Rn)})()),Ln.unsubscribe=wn(Dn)};var xn=()=>{Ln.unsubscribe=wn(Dn)};function Nn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Cn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nn(Object(r),!0).forEach((function(t){x()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const{dispatch:In,select:Mn,subscribe:An}=wp.data,Yn={deleteButton:null},Fn=()=>{const e=tec.editorDialog.el.$instance.find("input:checked").val();In("core/notices").removeNotice("TRASH_POST_NOTICE_ID");const t=Mn("core/editor").getCurrentPostType(),r=Mn("core").getPostType(t),n=Mn("core/editor").getCurrentPost();wp.apiFetch({path:`/wp/v2/${r.rest_base}/${n.id}?_tec_update_type=${e}`,method:"DELETE"}).then(e=>{window.location.replace(e._tec_redirect_url)}).catch(e=>{console.error(e)})},Un=()=>{const e=window.tecEventsSeriesBlockEditor;tec.editorDialog.el.$instance.attr("title",e.trashRecurringEvent),fn(),En((()=>{const e=[],t=window.tecEventsSeriesBlockEditor;return e.push({type:"single",label:On(),classes:[],inputClasses:[],labelClasses:[],checked:!1}),e.push({type:"upcoming",label:t.upcomingSetting,classes:[],inputClasses:[],labelClasses:[],checked:!1}),e.push({type:"all",label:t.allEvents,classes:[],inputClasses:[],labelClasses:[],checked:!0}),e})()),tec.editorDialog.setDialogSettings(Cn(Cn({},tec.editorDialog.defaultDialogSettings),{},{buttons:[{class:"button-primary",text:window.tecEventsSeriesBlockEditor.okButton,click:Fn}]})),tec.editorDialog.openDialog()},Hn=e=>{const t=Mn("core/editor").getCurrentPost(),{meta:r}=t;""!==r._tribe_blocks_recurrence_rules&&"[]"!==r._tribe_blocks_recurrence_rules&&(e.preventDefault(),e.stopPropagation(),Un())},Bn=()=>{const{isEditedPostNew:e,getCurrentPostId:t,getCurrentPostType:r}=Mn("core/editor"),{getPostType:n,canUser:o}=Mn("core"),c=t();if(!c)return!1;const i=n(r()),l=i&&i.rest_base||"",s=!(!c||!l)&&o("delete",l,c);return!e()&&c&&s},Gn=()=>{const e=Mn("core/edit-post").isEditorSidebarOpened();if(!e||Yn.deleteButton&&Yn.deleteButton.isConnected)!e&&Yn.deleteButton&&(Yn.deleteButton.removeEventListener("click",Hn),Yn.deleteButton=null);else{const e=setInterval(()=>{const t=document.querySelector("button.editor-post-trash");t&&(clearInterval(e),Yn.deleteButton=t,Yn.deleteButton.addEventListener("click",Hn))},10)}};var Vn=()=>{Bn()&&Gn(),An(()=>{Bn()&&Gn()})};_n(),xn(),Vn();var Wn=r("K2gz"),Kn=r.n(Wn),$n=r("6Ugf"),Xn=r("PSCs");const{addFilter:qn}=wp.hooks,Jn=Object(wt.get)("tribe_events_pro_recurrence_strings"),{lockIconTooltip:zn}=Jn.customTablesV1.recurrence,Qn=(e,t)=>{var r;const{blockType:n,checked:o,className:c,disabled:i,id:l,index:a,labelComponent:u,onChange:d,value:p}=t,y=R.store.getState(),f=n!==Xn.constants.RECURRING,E=(f?s:b).isRuleTypeCustom(y,{index:a}),O=Object(N.toMoment)(Object(Dt.getStart)(y)),_=Mt(O),g="undefined"!=typeof tecEventDetails&&!(null!==(r=tecEventDetails)&&void 0!==r&&r.isRdate)&&!f&&!E&&_.toLowerCase()===p;return wp.element.createElement("div",{className:Kn()("tribe-editor__day-of-week",c)},wp.element.createElement($n.Checkbox,{checked:o,disabled:i,id:l,label:u,onChange:d,value:p}),g&&wp.element.createElement("span",{className:"tribe-editor__day-of-week__lock dashicons dashicons-lock",title:zn}))};var Zn=()=>{qn("elements.dayOfWeek.dayOfWeekContentHook","tec/filterDayOfWeekContent",Qn)};const{addFilter:eo}=wp.hooks,{__:to}=wp.i18n;var ro=()=>{eo("elements.exceptionField.singularTypePickerRowLabelHook","tec/filterSingularTypePickerRowLabelHook",()=>to("Not","tribe-events-calendar-pro"))},no=r("8N8N"),oo=r("h74D"),co=r("rf6O"),io=r.n(co);const{__:lo}=wp.i18n,so=e=>{let{afterLabel:t,blockType:r,className:n,disabled:o,index:c,selected:i}=e;return wp.element.createElement(no.LabeledRow,{className:Kn()("tribe-editor__every-frequency",n),label:lo("Every","tribe-events-calendar-pro")},wp.element.createElement(no.FrequencySelect,{blockType:r,disabled:o,index:c,selected:i}),wp.element.createElement("span",{className:"tribe-editor__after-every-frequency"},t))};so.propTypes={afterLabel:io.a.string.isRequired,blockType:io.a.oneOf(st.BLOCK_TYPES),className:io.a.string,disabled:io.a.bool,index:io.a.number.isRequired,selected:h.proptypes.ReactSelectOption.isRequired};var ao=so,uo=r("Q9xL");const{RECURRING:po}=st,{DAILY:bo,WEEKLY:yo,MONTHLY:fo,YEARLY:Eo}=X,{DAY_LABEL:Oo,WEEK_LABEL:_o,MONTH_LABEL:go,YEAR_LABEL:vo,DAY_LABEL_PLURAL:mo,WEEK_LABEL_PLURAL:To,MONTH_LABEL_PLURAL:ko,YEAR_LABEL_PLURAL:So}=i,ho=(e,t)=>(t.blockType===po?Ke:$).getTypeOption(e,t),Ro=(e,t)=>{const r=((e,t)=>(t.blockType===po?Ke:$).getBetween(e,t))(e,t)>1;let n="";switch(t.selected.value){case bo:n=r?mo:Oo;break;case yo:n=r?To:_o;break;case fo:n=r?ko:go;break;case Eo:n=r?So:vo}return n};var Po=Object(St.compose)(Object(uo.withStore)(),Object(oo.connect)((e,t)=>({afterLabel:Ro(e,t),selected:ho(e,t)})))(ao),jo=r("l3Sj");r("644Q");const wo=e=>{let{className:t,isCustom:r,onChange:n,options:o,value:c}=e;return wp.element.createElement("div",{className:Kn()("tribe-editor__day-of-month-picker",t)},wp.element.createElement($n.Select,{className:"tribe-editor__day-of-month-picker__day-of-month-select",backspaceRemovesValue:!1,value:c,isDisabled:r,isSearchable:!1,options:o,onChange:n}))};wo.propTypes={className:io.a.string,isCustom:io.a.bool,onChange:io.a.func,options:io.a.arrayOf(h.proptypes.ReactSelectOption).isRequired,value:h.proptypes.ReactSelectOptions.isRequired};var Lo=wo,Do=r("JXX8"),xo=r("Rkpb");var No=Object(St.compose)(Object(uo.withStore)(),Object(oo.connect)((e,t)=>{var r;const n=t.blockType===Xn.constants.RECURRING?Do.selectors:xo.selectors,o=(e=>{const{week:t,day:r}=e;return t?`${t}-${r}`:String(r)})({week:n.getWeek(e,t),day:n.getDay(e,t)}),c="undefined"!=typeof tecEventDetails&&(null===(r=tecEventDetails)||void 0===r?void 0:r.isRdate),i=t.isCustom||c?(e=>{const t=e.split("-"),r=Object(wt.get)("tribe_events_pro_recurrence_strings");if(1===t.length){const e=t[0];return[{label:r.customTablesV1.dayOfMonth.date[e],value:String(e)}]}if(2===t.length){const e=t[0]+It[t[1]],n=r.customTablesV1.dayOfMonth.pattern[e];return[{label:n.label,value:n.ordinal.toLowerCase()+"-"+n.day}]}return[]})(o):E.getDayOfMonthOptions(e,t);let l=K()(i,e=>o===e.value);return l=!l&&i.length>0?i[0]:l,{options:i,value:l}},(e,t)=>({onChange:r=>{const n=t.blockType===Xn.constants.RECURRING?Do.actions.editRule:xo.actions.editException,o=Ht(r.value);e(n(t.index,o))}})))(Lo);const Co=e=>{let{blockType:t,className:r,index:n,isCustom:o}=e;return wp.element.createElement(no.LabeledRow,{className:Kn()("tribe-editor__on-day-of-month-picker",r),label:Object(jo.__)("On the","tribe-events-calendar-pro")},wp.element.createElement(No,{blockType:t,isCustom:o,index:n}))};Co.propTypes={blockType:io.a.oneOf(st.BLOCK_TYPES),className:io.a.string,index:io.a.number.isRequired,isCustom:io.a.bool};var Io=Co;const Mo=(e,t)=>{const{blockType:r,index:n}=t,o=R.store.getState(),c=r===st.RECURRING?b:s,i=c.getTypeOption(o,{index:n}),l=c.isRuleTypeCustom(o,{index:n});return wp.element.createElement(Po,{blockType:r,disabled:l,index:n,selected:i})},Ao=(e,t)=>{const{blockType:r,index:n}=t,o=(r===st.RECURRING?b:s).isRuleTypeCustom(R.store.getState(),{index:n});return wp.element.createElement(no.OnDayOfWeek,{blockType:r,sundayDisabled:o,mondayDisabled:o,tuesdayDisabled:o,wednesdayDisabled:o,thursdayDisabled:o,fridayDisabled:o,saturdayDisabled:o,index:n})},Yo=(e,t)=>{const{blockType:r,index:n}=t,o=(r===st.RECURRING?b:s).isRuleTypeCustom(R.store.getState(),{index:n});return wp.element.createElement(Io,{blockType:r,isCustom:o,index:n})},Fo=(e,t)=>{const{blockType:r,index:n}=t,o=(r===st.RECURRING?b:s).isRuleTypeCustom(R.store.getState(),{index:n});return wp.element.createElement(no.InMonth,{blockType:r,disabled:o,index:n})},Uo=(e,t)=>{const{blockType:r,index:n}=t,o=(r===st.RECURRING?b:s).isRuleTypeCustom(R.store.getState(),{index:n});return wp.element.createElement(no.SeriesEnds,{blockType:r,dayPickerInputDisabled:o,numberInputDisabled:o,selectDisabled:o,index:n})},{addFilter:Ho}=wp.hooks,{__:Bo}=wp.i18n;var Go=()=>{Ho("elements.exceptionField.dailyTypePickerRowLabelHook","tec/filterDailyTypePickerRowLabelHook",()=>Bo("Not","tribe-events-calendar-pro")),Ho("elements.exceptionField.dailyAfterTypePickerHook","tec/filterDailyAfterTypePicker",Mo),Ho("elements.exceptionField.dailySeriesEndsRowLabelHook","tec/filterDailySeriesEndsRowLabel",()=>{})};const{addFilter:Vo}=wp.hooks,{__:Wo}=wp.i18n;var Ko=()=>{Vo("elements.exceptionField.weeklyTypePickerRowLabelHook","tec/filterWeeklyTypePickerRowLabelHook",()=>Wo("Not","tribe-events-calendar-pro")),Vo("elements.exceptionField.weeklyAfterTypePickerHook","tec/filterWeeklyAfterTypePicker",Mo),Vo("elements.exceptionField.weeklyOnDayOfWeekHook","tec/filterWeeklyOnDayOfWeek",Ao),Vo("elements.exceptionField.weeklySeriesEndsHook","tec/filterWeeklySeriesEnds",Uo)};const{addFilter:$o}=wp.hooks,{__:Xo}=wp.i18n;var qo=()=>{$o("elements.exceptionField.monthlyTypePickerRowLabelHook","tec/filterMonthlyTypePickerRowLabelHook",()=>Xo("Not","tribe-events-calendar-pro")),$o("elements.exceptionField.monthlyAfterTypePickerHook","tec/filterMonthlyAfterTypePicker",Mo),$o("elements.exceptionField.monthlySeriesEndsHook","tec/filterMonthlySeriesEnds",Uo)};const{addFilter:Jo}=wp.hooks,{__:zo}=wp.i18n;var Qo=()=>{Jo("elements.exceptionField.yearlyTypePickerRowLabelHook","tec/filterYearlyTypePickerRowLabelHook",()=>zo("Not","tribe-events-calendar-pro")),Jo("elements.exceptionField.yearlyAfterTypePickerHook","tec/filterYearlyAfterTypePicker",Mo),Jo("elements.exceptionField.yearlyInMonthHook","tec/filterYearlyInMonth",Fo),Jo("elements.exceptionField.yearlySeriesEndsHook","tec/filterYearlySeriesEnds",Uo)};var Zo=()=>{ro(),Go(),Ko(),qo(),Qo()};const{addFilter:ec}=wp.hooks,tc=(e,t,r)=>s.getExceptionRuleTypes(t,{index:r});var rc=()=>{ec("elements.exceptionForm.exceptionFieldOptionsHook","tec/filterExceptionFieldOptions",tc)},nc=r("GE2E");const{addFilter:oc}=wp.hooks,cc=Object(wt.get)("tribe_events_pro_recurrence_strings"),{lockIconTooltip:ic}=cc.customTablesV1.recurrence,lc=(e,t)=>{const{blockType:r,children:n,className:o,disabled:c,index:i,onClick:l,value:a}=t,u=r===Xn.constants.RECURRING,d=R.store.getState(),p=(u?b:s).isRuleTypeCustom(d,{index:i}),y=Object(N.toMoment)(Object(Dt.getStart)(d)).month()+1,f=Object(ln.useMemo)(()=>!u||p||y!==X.MONTHS_OF_THE_YEAR_MAPPING_TO_STATE[a]?wp.element.createElement(ln.Fragment,null,wp.element.createElement(nc.Close,null),wp.element.createElement("span",{className:"tribe-editor__month-tag__remove"},Object(jo.__)("Remove","tribe-events-calendar-pro"))):wp.element.createElement("span",{className:"tribe-editor__month-tag__lock dashicons dashicons-lock",title:ic}),[u,p,y,a]);return wp.element.createElement("button",{className:Kn()({"tribe-editor__month-tag":!0,"tribe-editor__month-tag--disabled":c},o),disabled:c,onClick:l},f,n)};var sc=()=>{oc("elements.monthTag.monthTagContentHook","tec/filterMonthTagContent",lc)};const{addFilter:ac}=wp.hooks,{__:uc}=wp.i18n;var dc=()=>{ac("elements.recurringField.singularTypePickerRowLabelHook","tec/filterSingularTypePickerRowLabelHook",()=>uc("Happens","tribe-events-calendar-pro"))};const{addFilter:pc}=wp.hooks,{__:bc}=wp.i18n;var yc=()=>{pc("elements.recurringField.dailyFromTimeRangePickerHook","tec/filterDailyFromTimeRangePicker",()=>null),pc("elements.recurringField.dailyRecurringToDateTimePickerHook","tec/filterDailyFromTimeRangePicker",()=>null),pc("elements.recurringField.dailyTypePickerRowLabelHook","tec/filterDailyTypePickerRowLabelHook",()=>bc("Happens","tribe-events-calendar-pro")),pc("elements.recurringField.dailyAfterTypePickerHook","tec/filterDailyAfterTypePicker",Mo)};const{addFilter:fc}=wp.hooks,{__:Ec}=wp.i18n;var Oc=()=>{fc("elements.recurringField.weeklyFromTimeRangePickerHook","tec/filterWeeklyFromTimeRangePicker",()=>null),fc("elements.recurringField.weeklyRecurringToDateTimePickerHook","tec/filterWeeklyFromTimeRangePicker",()=>null),fc("elements.recurringField.weeklyTypePickerRowLabelHook","tec/filterWeeklyTypePickerRowLabelHook",()=>Ec("Happens","tribe-events-calendar-pro")),fc("elements.recurringField.weeklyAfterTypePickerHook","tec/filterWeeklyAfterTypePicker",Mo),fc("elements.recurringField.weeklyOnDayOfWeekHook","tec/filterWeeklyOnDayOfWeek",Ao),fc("elements.recurringField.weeklySeriesEndsHook","tec/filterWeeklySeriesEnds",Uo)};const{addFilter:_c}=wp.hooks,{__:gc}=wp.i18n;var vc=()=>{_c("elements.recurringField.monthlyFromTimeRangePickerHook","tec/filterMonthlyFromTimeRangePicker",()=>null),_c("elements.recurringField.monthlyRecurringToDateTimePickerHook","tec/filterMonthlyFromTimeRangePicker",()=>null),_c("elements.recurringField.monthlyTypePickerRowLabelHook","tec/filterMonthlyTypePickerRowLabelHook",()=>gc("Happens","tribe-events-calendar-pro")),_c("elements.recurringField.monthlyAfterTypePickerHook","tec/filterMonthlyAfterTypePicker",Mo),_c("elements.recurringField.monthlyOnDayOfMonthPickerHook","tec/filterMonthlyOnDayOfMonthPicker",Yo),_c("elements.recurringField.monthlySeriesEndsHook","tec/filterMonthlySeriesEnds",Uo)};const{addFilter:mc}=wp.hooks,{__:Tc}=wp.i18n;var kc=()=>{mc("elements.recurringField.yearlyFromTimeRangePickerHook","tec/filterYearlyFromTimeRangePicker",()=>null),mc("elements.recurringField.yearlyRecurringToDateTimePickerHook","tec/filterYearlyFromTimeRangePicker",()=>null),mc("elements.recurringField.yearlyTypePickerRowLabelHook","tec/filterYearlyTypePickerRowLabelHook",()=>Tc("Happens","tribe-events-calendar-pro")),mc("elements.recurringField.yearlyAfterTypePickerHook","tec/filterYearlyAfterTypePicker",Mo),mc("elements.recurringField.yearlyInMonthHook","tec/filterYearlyInMonth",Fo),mc("elements.recurringField.yearlyOnDayOfMonthPickerHook","tec/filterYearlyOnDayOfMonthPicker",Yo),mc("elements.recurringField.yearlySeriesEndsHook","tec/filterYearlySeriesEnds",Uo)};var Sc=()=>{dc(),yc(),Oc(),vc(),kc()};const{__:hc,sprintf:Rc}=wp.i18n,{addFilter:Pc}=wp.hooks,jc=(e,t,r)=>b.getRecurrenceRuleTypes(t,{index:r});var wc=()=>{var e;Pc("elements.recurringForm.recurringFieldOptionsHook","tec/filterRecurringFieldOptions",jc),"undefined"!=typeof tecEventDetails&&null!==(e=tecEventDetails)&&void 0!==e&&e.isRdateNoticeParts&&Pc("elements.recurringForm.outputBeforeRecurringForm","tec/filterRecurringForm",e=>{const{name:t,url:r}=tecEventDetails.isRdateNoticeParts,n=Rc(hc("This is a single occurrence. To change recurrence rules, go to %1$s.","tribe-events-calendar-pro"),`<a href=${r}>${t}</a>`);return wp.element.createElement("div",null,wp.element.createElement("p",{dangerouslySetInnerHTML:{__html:n}}))})};const{Tooltip:Lc}=wp.components,{addFilter:Dc}=wp.hooks,{__:xc}=wp.i18n,Nc=(e,t)=>{const{afterSelect:r,blockType:n,dispatch:o,index:i,options:l,selected:s}=t,a=n===Xn.constants.RECURRING,u=a?Do.actions.editRule:xo.actions.editException,p=a?d.editRecurrenceRule:c.editExceptionRule;return wp.element.createElement(ln.Fragment,null,wp.element.createElement($n.Select,{className:"tribe-editor__type-picker__type-select",backspaceRemovesValue:!1,value:s,isSearchable:!1,options:l,onChange:e=>{o(p(i,{typeId:e.id})),o(u(i,{[Xn.constants.KEY_TYPE]:e.value}))},getOptionValue:e=>e.id}),r)},Cc=(e,t,r)=>(r.blockType===Xn.constants.RECURRING?b:s).getTypeOption(t,r),Ic=(e,t,r)=>{const{blockType:n,index:o}=r;if(n===Xn.constants.EXCEPTION)return e;if(!b.isRuleTypeCustom(t,{index:o}))return e;const c=xc("This custom recurrence rule was created in a different calendar system\n\r and cannot be edited. Select a different option to create a new rule.","tribe-events-calendar-pro");return wp.element.createElement(Lc,{text:c},wp.element.createElement("span",{"aria-label":c,className:"tribe-editor__type-picker__type-select-after-tooltip dashicons dashicons-info",tabIndex:"0"}))};var Mc=()=>{Dc("elements.typePicker.typePickerContentHook","tec/filterTypePickerContent",Nc),Dc("elements.typePicker.typePickerSelectedOptionHook","tec/filterTypePickerSelectedOption",Cc),Dc("elements.typePicker.afterTypePickerSelectHook","tec/filterAfterTypePickerSelect",Ic)};r("Ixdi");function Ac(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Yc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ac(Object(r),!0).forEach((function(t){x()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ac(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}(()=>{Zn(),Zo(),rc(),sc(),Sc(),wc(),Mc()})();const{subscribe:Fc,select:Uc}=wp.data,Hc=window.jQuery;let Bc=0,Gc=null,Vc=null;const Wc={onMetaboxSave:null,listenForSaveClick:null},Kc=(e,t,r)=>Yc(Yc({},tec.editorDialog.defaultDialogSettings),{},{closeOnEscape:!1,dialogClass:"redirect-no-close",buttons:[{class:"button-primary",text:t,click:()=>(e=>{tec.editorDialog.closeDialog(),window.location.replace(e)})(r)}],title:e}),$c=e=>{if(!e||!e.data)return;Gc=e.data;const{location:t,title:r,message:n,confirmButtonLabel:o,forceRedirect:c}=Gc;c&&t?window.location.replace(t):t&&r&&n&&o&&(Wc.onMetaboxSave&&Wc.onMetaboxSave(),Wc.listenForSaveClick&&Wc.listenForSaveClick(),fn(),En((e=>{const t=[];return t.push({type:"text",text:e}),t})(n)),tec.editorDialog.setDialogSettings(Kc(r,o,t)),tec.editorDialog.openDialog(),Vc||(Vc=document.createElement("style"),Vc.type="text/css",Vc.innerText=".redirect-no-close .ui-dialog-titlebar-close {display: none;}"),Vc.isConnected||document.head.appendChild(Vc))},Xc=()=>{if(!window.tecCustomTablesV1BlocksEditor)return;const e=Uc("core/editor"),{ajaxurl:t,redirectAction:r,redirectNonceName:n,redirectNonce:o,eventPostId:c}=tecCustomTablesV1BlocksEditor;Bc=0,Hc.get(t,{action:r,[n]:o,event_id:e.getCurrentPostId(),event_post_id:c}).done($c).fail(qc)},qc=(e,t,r)=>{if(Bc+=1,Bc<3)return console.error("tec_custom_tables_v1_redirect_data ajax request failed, retrying again.",r),void Xc();console.error("tec_custom_tables_v1_redirect_data ajax request failed:",r)},Jc=()=>{Vr()&&Xc()};(()=>{Wc.onMetaboxSave=Fc(Jc)})();const{Button:zc}=wp.components,{PluginPostStatusInfo:Qc}=wp.editPost,{__:Zc}=wp.i18n;var ei=e=>{let{status:t}=e;return""!==tec_events_pro_duplicate.duplicate_link&&"auto-draft"!==t&&wp.element.createElement(Qc,null,wp.element.createElement(zc,{isTertiary:!0,className:"tec-event-duplicate-action__duplicate-link",href:tec_events_pro_duplicate.duplicate_link,style:{marginLeft:"-6px",textDecoration:"underline"},target:"_blank"},Zc("Duplicate","tribe-events-calendar-pro")))};const ti=wp.data.withSelect(e=>({select:e("core/editor").getEditedPostAttribute("status")}));var ri=Object(St.compose)(ti)(ei);wp.plugins.registerPlugin("tec-event-duplicate",{render:ri});const{subscribe:ni,select:oi}=wp.data,ci=window.jQuery;let ii=0;const li={saveButton:null,eventSeriesSelect:null},si="hidden",ai={listenForEventSeriesSelect:null,getSeriesData:null},ui=e=>{const t={title:null,id:null};return"string"==typeof e&&(t.title=e),"object"==typeof e&&(t.title=e.title,t.id=e.id),t},di=e=>JSON.stringify(e),pi=()=>{if(!window.tecCustomTablesV1BlocksEditor)return;const e=oi("core/editor"),{ajaxurl:t,seriesAction:r,seriesNonce:n,seriesNonceName:o}=tecCustomTablesV1BlocksEditor;ii=0,ci.get(t,{action:r,[o]:n,event_id:e.getCurrentPostId()}).done(Oi).fail(_i)},bi=()=>{Vr()&&pi()},yi=()=>{li.eventSeriesSelect||(li.eventSeriesSelect=document.querySelector(Hr))},fi=e=>{const t=e.data.$target,r=t.find(":selected");if(!r.length)return;const n=t.parent().find(Br);if("-1"===r.val())return void n.addClass(si);const o=r.data("editLink");o?(n.find(Gr).attr("href",o),n.removeClass(si)):n.addClass(si)},Ei=()=>{if(yi(),!li.eventSeriesSelect)return;if("-1"!==String(li.eventSeriesSelect.value))return;const e=(()=>{const e=oi("core/editor"),t=String(e.getPostEdits().title).trim();return"undefined"!==t?String(t):String(e.getCurrentPost().title).trim()})();if(!e.length)return;const t=di(ui(e)),r=new Option(e,t,!0,!0);ci(li.eventSeriesSelect).append(r).trigger("change")},Oi=e=>{const t=ci(li.eventSeriesSelect),r=t.find(":selected");if(void 0!==e.data.id&&void 0!==e.data.edit_link){if(e.data.id){const t=di(ui(e.data));r.attr("value",t)}e.data.edit_link&&r.attr("data-edit-link",e.data.edit_link),t.trigger("change")}},_i=(e,t,r)=>{if(ii+=1,ii<3)return console.error("tec_custom_tables_v1_series_data ajax request failed, retrying again.",r),void pi();console.error("tec_custom_tables_v1_series_data ajax request failed:",r)},gi=()=>{(()=>{const e=Yr("core/editor").isSavingPost();return!(!Fr.isSavingPost&&!e)&&(!Fr.isSavingPost&&e?(Fr.isSavingPost=e,!1):(!Fr.isSavingPost||!e)&&(Fr.isSavingPost=e,!0))})()&&(ai.getSeriesData(),ai.getSeriesData=null,pi())},vi=()=>{(()=>{const e=oi("core/block-editor").getBlocks().filter(e=>"tribe/event-datetime"===e.name);return!!e.length&&(e[0].attributes.rules&&"[]"!==e[0].attributes.rules)})()&&(Ei(),(()=>{const e=ci(li.eventSeriesSelect).find(":selected");if(!e.length)return!1;if("-1"===e.val())return!1;return!e.data("editLink")})()&&(ai.getSeriesData=ni(gi)))},mi=()=>{li.saveButton&&li.saveButton.isConnected||(li.saveButton=document.querySelector(Ur),li.saveButton&&li.saveButton.addEventListener("click",vi,!0))},Ti=()=>{if(yi(),!li.eventSeriesSelect)return;ai.listenForEventSeriesSelect(),ai.listenForEventSeriesSelect=null;const e=ci(li.eventSeriesSelect);e.on("change",{$target:e},fi)};(()=>{ni(mi),ni(bi),ai.listenForEventSeriesSelect=ni(Ti)})()},O7uX:function(e,t,r){},OluY:function(e,t){e.exports=tribe["events-pro"].data.status.sagas},OuoG:function(e,t){e.exports=tribe["events-pro"].data.blocks.exception.types},PSCs:function(e,t){e.exports=tribe["events-pro"].data.blocks},Q9xL:function(e,t){e.exports=tribe.common.hoc},Rkpb:function(e,t){e.exports=tribe["events-pro"].data.blocks.exception},RmXt:function(e,t){e.exports=tribe.modules.reduxSaga.effects},SOG1:function(e,t){e.exports=tribe.events.data.blocks.datetime.selectors},UnPw:function(e,t){e.exports=tribe["events-pro"].data.blocks.exception.selectors},Yht6:function(e,t){e.exports=tribe.events.data.blocks.datetime.types},cDcd:function(e,t){e.exports=React},g8L8:function(e,t){e.exports=tribe.common.store},gGza:function(e,t){e.exports=tribe["events-pro"].data.blocks.recurring.constants},gSph:function(e,t){e.exports=tribe["events-pro"].data.blocks.constants},h74D:function(e,t){e.exports=tribe.modules.reactRedux},"iy/v":function(e,t){e.exports=tribe["events-pro"].data.blocks.recurring.selectors},kczL:function(e,t){e.exports=tribe.common.utils.globals},l3Sj:function(e,t){e.exports=wp.i18n},pVH8:function(e,t){e.exports=tribe["events-pro"].data.blocks.recurring.types},rKB8:function(e,t){e.exports=tribe.modules.redux},rf6O:function(e,t){e.exports=tribe.modules.propTypes},tPgE:function(e,t){e.exports=tribe["events-pro"].data.blocks.exception.actions},tbMi:function(e,t){e.exports=tribe.common.utils.date},wy2R:function(e,t){e.exports=moment},zCYh:function(e,t){e.exports=tribe.common.utils.moment}});